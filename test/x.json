{
  "types": {
    "TxId": "nat",
    "Account": {
      "type": "record",
      "fields": [
        { "name": "owner", "type": "principal" },
        { "name": "subaccount", "type": { "type": "opt", "innerType": "blob" } }
      ]
    },
    "SubAccount": "blob",
    "Transaction": {
      "type": "record",
      "fields": [
        { "name": "kind", "type": "text" },
        {
          "name": "mint",
          "type": {
            "type": "opt",
            "innerType": {
              "type": "record",
              "fields": [
                { "name": "amount", "type": "nat" },
                { "name": "to", "type": "Account" },
                {
                  "name": "memo",
                  "type": { "type": "opt", "innerType": "blob" }
                },
                {
                  "name": "created_at_time",
                  "type": { "type": "opt", "innerType": "nat64" }
                }
              ]
            }
          }
        },
        {
          "name": "burn",
          "type": {
            "type": "opt",
            "innerType": {
              "type": "record",
              "fields": [
                { "name": "amount", "type": "nat" },
                { "name": "from", "type": "Account" },
                {
                  "name": "memo",
                  "type": { "type": "opt", "innerType": "blob" }
                },
                {
                  "name": "created_at_time",
                  "type": { "type": "opt", "innerType": "nat64" }
                }
              ]
            }
          }
        },
        {
          "name": "transfer",
          "type": {
            "type": "opt",
            "innerType": {
              "type": "record",
              "fields": [
                { "name": "amount", "type": "nat" },
                { "name": "from", "type": "Account" },
                { "name": "to", "type": "Account" },
                {
                  "name": "memo",
                  "type": { "type": "opt", "innerType": "blob" }
                },
                {
                  "name": "created_at_time",
                  "type": { "type": "opt", "innerType": "nat64" }
                },
                { "name": "fee", "type": { "type": "opt", "innerType": "nat" } }
              ]
            }
          }
        },
        { "name": "timestamp", "type": "nat64" }
      ]
    },
    "GetAccountTransactionsArgs": {
      "type": "record",
      "fields": [
        { "name": "account", "type": "Account" },
        { "name": "start", "type": { "type": "opt", "innerType": "TxId" } },
        { "name": "max_results", "type": "nat" }
      ]
    },
    "TransactionWithId": {
      "type": "record",
      "fields": [
        { "name": "id", "type": "TxId" },
        { "name": "transaction", "type": "Transaction" }
      ]
    },
    "GetTransactions": {
      "type": "record",
      "fields": [
        {
          "name": "transactions",
          "type": { "type": "vec", "innerType": "TransactionWithId" }
        },
        {
          "name": "oldest_tx_id",
          "type": { "type": "opt", "innerType": "TxId" }
        }
      ]
    },
    "GetTransactionsErr": {
      "type": "record",
      "fields": [{ "name": "message", "type": "text" }]
    },
    "GetTransactionsResult": {
      "type": "variant",
      "fields": { "Ok": "GetTransactions", "Err": "GetTransactionsErr" }
    },
    "ListSubaccountsArgs": {
      "type": "record",
      "fields": [
        { "name": "owner", "type": "principal" },
        {
          "name": "start",
          "type": { "type": "opt", "innerType": "SubAccount" }
        }
      ]
    },
    "InitArgs": {
      "type": "record",
      "fields": [{ "name": "ledger_id", "type": "principal" }]
    }
  },
  "service": {
    "args": ["InitArgs"],
    "methods": {
      "get_account_transactions": {
        "name": "get_account_transactions",
        "inputs": ["GetAccountTransactionsArgs"],
        "outputs": ["GetTransactionsResult"],
        "type": "update"
      },
      "ledger_id": {
        "name": "ledger_id",
        "inputs": ["principal"],
        "outputs": [],
        "type": "query"
      },
      "list_subaccounts": {
        "name": "list_subaccounts",
        "inputs": ["ListSubaccountsArgs"],
        "outputs": [{ "type": "vec", "innerType": "SubAccount" }],
        "type": "query"
      }
    }
  }
}
